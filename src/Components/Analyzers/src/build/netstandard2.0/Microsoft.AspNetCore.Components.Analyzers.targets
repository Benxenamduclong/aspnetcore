<Project>
  <Target Name="_RemoveComponentAnalyzer" BeforeTargets="ResolveLockFileAnalyzers" Condition="'@(Analyzer->Count())' != '0'">
    <ItemGroup>
      <_AnalyzerName Include="$([System.IO.Path]::GetFileNameWithoutExtension('%(Analyzer.Identity)'))" />
    </ItemGroup>

    <PropertyGroup>
      <_AspNetCoreComponentsAnalyzerPath>$([MSBuild]::NormalizePath('$(MSBuildThisFileDirectory)../../analyzers/dotnet/cs/Microsoft.AspNetCore.Components.Analyzers.dll'))</_AspNetCoreComponentsAnalyzerPath>
    </PropertyGroup>

    <ItemGroup Condition="'@(_AnalyzerName->AnyHaveMetadataValue('Identity', 'Microsoft.AspNetCore.Components.Analyzers'))' == 'true'">
      <ResolvedAnalyzers Remove="$(_AspNetCoreComponentsAnalyzerPath)" />
    </ItemGroup>
  </Target>
</Project>
